<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, inital-scale=1.0">


</head>


<body>
   
        
    <input type="text" id="input1">
    <p id="error">字數不能超過</p>

    <button id = 'clearError'>x</button>

    <script>
        var input = document.getElementById('input1')
        var errorMsg = document.getElementById('error')

        document.getElementById('clearError').addEventListener('click',function(){
            setState({
                    error : false
            })
        })

        var state = {
            value :"",
            error : false
        }

        var setState = function(newStateC){
            state = {
                ...state,
                ...newStateC
            }
            render()
        }

        var render = function(){
            input.value = state.value
            if(state.error){
                errorMsg.style.display= 'block'
            } else{
                errorMsg.style.display= 'none'
            }
        }

        var handleInput = function(value){
            if(value.length < 10 ){
                setState({
                    value : value
                    
                })
            } else {
                setState({
                    error :true
                })
            }
        }


        input.addEventListener('input',function(){
            handleInput(this.value)
        })


        render()
    </script>

</body>



</html>